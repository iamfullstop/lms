{% extends "layout.html" %}
{% block title %}<title>Edit Profile</title>{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto mt-10 bg-white p-8 shadow-md rounded-lg">
  <h2 class="text-3xl font-semibold text-center text-gray-800 mb-6">Edit Profile</h2>

  {% if messages %}
    {% for message in messages %}
      <div class="mb-4 text-sm p-3 rounded {{ message.tags }} {% if message.tags == 'success' %}bg-green-100 text-green-800{% elif message.tags == 'error' %}bg-red-100 text-red-800{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <form method="POST" enctype="multipart/form-data" class="space-y-6">
    {% csrf_token %}

    <!-- Full Name -->
    <div>
      <label for="id_full_name" class="block text-sm font-medium text-gray-700">Full Name</label>
      <input type="text" name="full_name" id="id_full_name"
             value="{{ form.full_name.value|default_if_none:'' }}"
             class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" />
      {% if form.full_name.errors %}
        <p class="text-sm text-red-600 mt-1">{{ form.full_name.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Email -->
    <div>
      <label for="id_email" class="block text-sm font-medium text-gray-700">Email</label>
      <input type="email" name="email" id="id_email"
             value="{{ form.email.value|default_if_none:'' }}"
             class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" />
      {% if form.email.errors %}
        <p class="text-sm text-red-600 mt-1">{{ form.email.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Bio -->
    <div>
      <label for="id_bio" class="block text-sm font-medium text-gray-700">Bio</label>
      <textarea name="bio" id="id_bio" rows="4"
                class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">{{ form.bio.value|default_if_none:'' }}</textarea>
      {% if form.bio.errors %}
        <p class="text-sm text-red-600 mt-1">{{ form.bio.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Profile Picture -->
    <div>
      <label class="block text-sm font-medium text-gray-700">Profile Picture</label>
      {% if user.profile_pic %}
        <div class="mb-3">
          <img src="{{ user.profile_pic.url }}" alt="Current Profile Pic" class="w-20 h-20 rounded-full object-cover">
        </div>
      {% endif %}
      <input type="file" name="profile_pic"
             class="mt-1 block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-blue-50 file:text-blue-700
                    hover:file:bg-blue-100" />
      {% if form.profile_pic.errors %}
        <p class="text-sm text-red-600 mt-1">{{ form.profile_pic.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Submit Button -->
    <div class="text-center">
      <button type="submit"
              class="inline-block w-full md:w-auto px-6 py-2 text-white bg-blue-600 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
        Save Changes
      </button>
    </div>
  </form>
</div>
{% endblock %}
