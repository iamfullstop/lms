<nav class="bg-white text-black shadow-md z-50">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    
    <!-- Left: Logo & Mobile Toggle -->
    <div class="flex items-center space-x-4">
      <a href="{% url 'home' %}" class="text-2xl font-bold text-blue-600">ShikyalayaGyan</a>
      <button id="mobile-toggle" class="md:hidden p-2 text-white hover:text-white focus:outline-none">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <!-- Middle: Search -->
    <div class="hidden md:flex flex-1 max-w-md mx-6 relative">
      <input type="text" placeholder="Search courses..."
             class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:border-blue-500 focus:ring-0 shadow-sm">
      <div class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
        <i class="fas fa-search"></i>
      </div>
    </div>

    <!-- Right: Links/User Menu -->
    <div class="hidden md:flex items-center space-x-4">
      {% if request.user.is_authenticated %}
        <div class="relative">
          <button id="user-btn" class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold">
            {{ request.user.username|first|upper }}
          </button>
          <div id="user-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-2">
            {% if request.user.role == 'instructor' %}
              <a href="{% url 'instructor_dashboard' %}" class="block px-4 py-2 hover:bg-gray-100">Dashboard</a>
              <a href="{% url 'create_courses' %}" class="block px-4 py-2 hover:bg-gray-100">Add Course</a>
              <a href="{% url 'profile' %}" class="block px-4 py-2 hover:bg-gray-100">Profile</a>

              <a href="{% url 'list_courses' %}" class="block px-4 py-2 hover:bg-gray-100">My Courses</a>
            {% elif request.user.role == 'student' %}
              <a href="{% url 'student_dashboard' %}" class="block px-4 py-2 hover:bg-gray-100">Dashboard</a>
              <a href="#" class="block px-4 py-2 hover:bg-gray-100">Enrolled Courses</a>
            {% endif %}
            <a href="{% url 'change_password' %}" class="block px-4 py-2 hover:bg-gray-100">Change Password</a>
            <a href="{% url 'profile' %}" class="block px-4 py-2 hover:bg-gray-100">Profile</a>
            <a href="{% url 'logout' %}" class="block px-4 py-2 text-red-600 hover:bg-red-50">Logout</a>
          </div>
        </div>
      {% else %}
        <a href="{% url 'login' %}" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50">Log In</a>
        <a href="{% url 'register' %}" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Join Free</a>
      {% endif %}
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden md:hidden px-4 pb-4 space-y-2 border-t border-gray-200">
    {% if request.user.is_authenticated %}
      <a href="{% url 'instructor_dashboard' %}" class="block py-2 hover:bg-gray-100">Dashboard</a>
      <a href="{% url 'list_courses' %}" class="block py-2 hover:bg-gray-100">My Courses</a>
      <a href="{% url 'create_courses' %}" class="block py-2 hover:bg-gray-100">Add Course</a>
      <a href="{% url 'logout' %}" class="block py-2 text-red-600 hover:bg-red-50">Logout</a>
      <a href="{% url 'profile' %}" class="block px-4 py-2 hover:bg-gray-100">Profile</a>

    {% else %}
      <a href="{% url 'login' %}" class="block py-2 text-blue-600 hover:bg-gray-100">Log In</a>
      <a href="{% url 'register' %}" class="block py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Join Free</a>
    {% endif %}
  </div>
</nav>

<script>
  document.getElementById('mobile-toggle').addEventListener('click', () => {
    document.getElementById('mobile-menu').classList.toggle('hidden');
  });

  document.getElementById('user-btn')?.addEventListener('click', () => {
    document.getElementById('user-menu').classList.toggle('hidden');
  });
</script>
