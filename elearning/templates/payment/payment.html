{% extends "layout.html" %} {% block title %}<title>
  Payment - {{ course.title }}</title
>{% endblock %} {% block content %}
<style>
  .mybody {
    background-color: #1d4ed8;
  }
  .payment-container {
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f9fafb;
    padding: 20px;
    font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
  }

  .payment-card {
    width: 100%;
    max-width: 450px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    border: 1px solid #e5e7eb;
    overflow: hidden;
  }

  .course-header {
    display: flex;
    padding: 20px;
    border-bottom: 1px solid #f3f4f6;
    gap: 16px;
  }

  .course-thumbnail {
    width: 100px;
    height: 100px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
  }

  .course-info {
    flex: 1;
  }

  .course-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 8px 0;
    line-height: 1.3;
  }

  .level-badge {
    display: inline-flex;
    background-color: #eff6ff;
    color: #1d4ed8;
    padding: 4px 12px;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .payment-details {
    padding: 20px;
  }

  .amount-label {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0 0 4px 0;
  }

  .amount-value {
    font-size: 1.875rem;
    font-weight: 700;
    color: #111827;
    margin: 0 0 24px 0;
  }

  .benefits-list {
    margin-bottom: 16px;
  }

  .benefit-item {
    display: flex;
    margin-bottom: 16px;
    align-items: flex-start;
  }

  .benefit-icon {
    color: #2563eb;
    margin-right: 12px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .benefit-title {
    font-weight: 500;
    color: #111827;
    margin: 0 0 2px 0;
  }

  .benefit-desc {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0;
  }

  .payment-button {
    width: 100%;
    background-color: #2563eb;
    color: white;
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    margin: 24px 0;
  }

  .payment-button:hover {
    background-color: #1d4ed8;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .esewa-logo {
    width: 24px;
    height: 24px;
    margin-right: 8px;
  }

  .secure-payment {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    color: #6b7280;
  }

  .secure-icon {
    color: #2563eb;
    margin-right: 6px;
  }
</style>
<div class="mybody">
  <div class="payment-container">
    <div class="payment-card">
      <div class="course-header">
        {% if course.thumbnail_img %}
        <img
          src="{{ course.thumbnail_img.url }}"
          alt="{{ course.title }}"
          class="course-thumbnail"
        />
        {% endif %}
        <div class="course-info">
          <h1 class="course-title">{{ course.title }}</h1>
          <div class="level-badge">{{ course.level|title }}</div>
        </div>
      </div>

      <div class="payment-details">
        <p class="amount-label">Total Amount</p>
        <p class="amount-value">NPR {{ course.price }}</p>

        <div class="benefits-list">
          <div class="benefit-item">
            <svg
              class="benefit-icon"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              />
            </svg>
            <div>
              <p class="benefit-title">Lifetime access</p>
              <p class="benefit-desc">Full course access forever</p>
            </div>
          </div>

          {% if course.offer_certificate %}
          <div class="benefit-item">
            <svg
              class="benefit-icon"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              />
            </svg>
            <div>
              <p class="benefit-title">Certificate of completion</p>
              <p class="benefit-desc">Shareable on LinkedIn</p>
            </div>
          </div>
          {% endif %}

          <div class="benefit-item">
            <svg
              class="benefit-icon"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              />
            </svg>
            <div>
              <p class="benefit-title">Mobile and TV access</p>
              <p class="benefit-desc">Learn anywhere, anytime</p>
            </div>
          </div>
        </div>

        <form
          action="https://rc-epay.esewa.com.np/api/epay/main/v2/form"
          method="POST"
        >
          <input type="hidden" name="amount" value="{{ course.price }}" />
          <input type="hidden" name="tax_amount" value="0" />
          <input type="hidden" name="total_amount" value="{{ course.price }}" />
          <input
            type="hidden"
            name="transaction_uuid"
            value="{{ transaction_uuid }}"
          />
          <input type="hidden" name="product_code" value="EPAYTEST" />
          <input type="hidden" name="product_service_charge" value="0" />
          <input type="hidden" name="product_delivery_charge" value="0" />
          <input type="hidden" name="success_url" value="{{ success_url }}" />
          <input type="hidden" name="failure_url" value="{{ failure_url }}" />
          <input
            type="hidden"
            name="signed_field_names"
            value="total_amount,transaction_uuid,product_code"
          />
          <input type="hidden" name="signature" value="{{ esewa_signature }}" />

          <button type="submit" class="payment-button">
            <img
              src="https://cdn.esewa.com.np/ui/images/esewa_og.png"
              alt="eSewa"
              class="esewa-logo"
            />
            Pay NPR {{ course.price }} with eSewa
          </button>
        </form>

        <div class="secure-payment">
          <svg
            class="secure-icon"
            width="16"
            height="16"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
              clip-rule="evenodd"
            />
          </svg>
          Secure payment processing
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
